<!DOCTYPE html>
<html class="no-js" lang="de-AT">


<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63326882-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-63326882-1');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Music Player </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="generator" content="Hugo 0.73.0" /> <!-- Fonts -->

    
    <link rel="canonical" href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/python/music-player/" />
    

    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,500,600,700,800' rel='stylesheet'
        type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet"> <!-- Stylesheets -->
     
    
    <link rel="stylesheet" href="https://linz.coderdojo.net/vendor.min.55a3cbb6f035c25e5c7cf706ee053eca6f5a54d8095b05fd737d1b0330f99eaf.css">
    <link rel="stylesheet" href="https://linz.coderdojo.net/css/animate.css">
     
     
    <link rel="stylesheet" href="https://linz.coderdojo.net/style.min.35aa49f96e03b4c2a97c78f45940017bc7017768e74f0ce20e9ff28467477ef3.css">
    <script src="https://kit.fontawesome.com/5bb5b2cc9c.js" crossorigin="anonymous"></script>
</head>

<body id="body">
    <!-- NAVIGATION -->

<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light ">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"><img src="/img/logo-linz.png" height="30"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/termine">Termine</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/info">Infos</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/mentoren">Mentoren</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/sponsoring">Sponsoring</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/uebungsanleitungen">Übungsanleitungen</a>
                </li>
            </ul>
        </div>
    </div>
</nav>     

<div class="container-fluid breadcrumb-container">
    <div class="container">
        <nav class="breadcrumb-nav" aria-label="breadcrumb">
        <ol class="breadcrumb">
            
        
        
        
        
        
        
        
        
        

        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/">Übungsanleitungen</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/">Programmieren</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/python/">Python</a>
        </li>
        
        
        
        

        
        
        
        
        </ol>

        
        </nav>
    </div>
</div> 

<section id="sushi">
    <div class="container">
        <div class="row">
            
            <div class="col-12 sushi-toc">
                <h2>Inhalt</h2>
                <nav id="TableOfContents">
<ul>
<li><a href="#music-player">Music Player</a>
<ul>
<li><a href="#voraussetzungen">Voraussetzungen</a></li>
<li><a href="#installieren-von-packages">Installieren von Packages</a></li>
<li><a href="#python">Python</a></li>
<li><a href="#bilder-und-icon">Bilder und Icon</a></li>
<li><a href="#musik">Musik</a></li>
<li><a href="#laden-von-packages">Laden von Packages</a></li>
<li><a href="#ein-fenster-erstellen">Ein Fenster erstellen</a></li>
<li><a href="#text-anzeigen">Text anzeigen</a></li>
<li><a href="#tasten-platzieren">Tasten platzieren</a></li>
<li><a href="#lautstärkeregler">Lautstärkeregler</a></li>
<li><a href="#statuszeile">Statuszeile</a></li>
<li><a href="#die-tasten-mit-funktionen-belegen">Die Tasten mit Funktionen belegen</a></li>
<li><a href="#ein-menü-für-unseren-musicplayer">Ein Menü für unseren Musicplayer</a></li>
<li><a href="#anpassen-der-play-taste">Anpassen der Play-Taste</a></li>
<li><a href="#aktivierung-des-fensters">Aktivierung des Fensters</a></li>
<li><a href="#erweiterungsmöglichkeiten">Erweiterungsmöglichkeiten</a></li>
<li><a href="#installieren-von-packates">Installieren von Packates</a></li>
</ul></li>
</ul>
</nav>
            </div>
            <div class="col-12 sushi-content"> 

<h1 id="music-player">Music Player</h1>

<p>Wir programmieren einen Musicplayer in Python, mit dem du deine mp3-Dateien abspielen kannst. Für das Interface verwenden wir das Package <code>Tkinter</code> und für die Steuerung der Musik benötigen wir <code>pygame</code>.</p>




     
    










<div class="row">
    <div class="col">
        <p></p>
    </div>
    <div class="col-12 col-md-12">
    <img src="/uebungsanleitungen/programmieren/python/music-player/img/music-player.png" alt="(.Get 1)" class="mx-auto " style="display: block; width: auto" />
    </div>
</div>


<h2 id="voraussetzungen">Voraussetzungen</h2>

<p>Übungsbeispiel <a href="../alien">Alien</a>, um schon erste Erfahrungen mit Python und Tkinter gesammelt zu haben.</p>

<h2 id="installieren-von-packages">Installieren von Packages</h2>

<p>Wenn du das erste Mal <code>pygame</code> verwendest, dann musst du dieses Package einmal über die Kommmandozeile installieren. Starte dazu den Command Prompt in Windows, indem du auf den Windows Startbutton klickst und nach <code>cmd</code> suchst. Tippe folgenden Befehl ein und drücke Enter:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">py -3 -m pip install pygame</code></pre></div>
<p>Wenn du auf einem Mac arbeitest, dann verwende den Terminal und einen der folgenden Befehle (es kann sein, dass je nach Version deines Betriebssysteme Fehlermeldungen kommen, dann probiere den nächsten Befehl):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">pip3 install pygame
pip 3 install pygame==1.9.3
pip 3 install pygame==2.0.0.dev6</code></pre></div>
<h2 id="python">Python</h2>

<p>Starte für Python die Programmierumgebung IDLE und öffne eine neue Datei (<code>File -&gt; New File</code>) und speichere die Datei als <code>Musicplayer.py</code> auf deinem Computer (<code>File -&gt; Save As</code>). Wähle als Dateityp <code>.pyw</code>, wenn du mit Windows arbeitest.</p>

<h2 id="bilder-und-icon">Bilder und Icon</h2>

<p>Lade dir die folgenden Bilder für die Knöpfe deines Music Players und das CoderDojo-Icon hier herunter. Speichere alle diese Dateien in dem Verzeichnis, wo auch dein Python-Programm gespeichert ist, in einem Unterverzeichnis images ab.</p>

<ul>
<li><a href="img/coderdojo.ico" target="_blank">coderdojo.ico</a></li>
<li><a href="img/pause.png" target="_blank">pause.png</a></li>
<li><a href="img/play.png" target="_blank">play.png</a></li>
<li><a href="img/stop.png" target="_blank">stop.png</a></li>
</ul>

<h2 id="musik">Musik</h2>

<p>Lege auch ein Unterverzeichnis <code>music</code> an, indem du einen Song als mp3 abspeicherst. Wir bezeichnen die Datei einmal mit <code>Song.mp3</code> (und du verwendest einfach deinen Songtitel).</p>

<h2 id="laden-von-packages">Laden von Packages</h2>

<p>Zu Beginn laden wir alle benötigten Packages und initialisieren gleich den <code>mixer</code> (der ist verantwortlich für das Abspielen der Musik) und eine Variable <code>paused</code>, die uns anzeigt, ob die Musik gerade pausiert.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> tkinter <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
<span style="color:#f92672">import</span> tkinter.messagebox
<span style="color:#f92672">from</span> tkinter <span style="color:#f92672">import</span> filedialog
<span style="color:#f92672">from</span> pygame <span style="color:#f92672">import</span> mixer
<span style="color:#f92672">import</span> os

mixer<span style="color:#f92672">.</span>init()
paused <span style="color:#f92672">=</span> False</code></pre></div>
<h2 id="ein-fenster-erstellen">Ein Fenster erstellen</h2>

<p>Wir starten mit einem neuen Fenster, das wir <code>window</code> nennen. Wir wählen eine Hintergrundfarbe für das Fenster, stellen die Größe ein, wählen einen passenden Titel und platzieren neben dem Titel das CoderDojo-Icon.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Fenster erstellen</span>
bg_color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;lightsteelblue&#34;</span>
window <span style="color:#f92672">=</span> Tk()
window<span style="color:#f92672">.</span>geometry(<span style="color:#e6db74">&#34;300x260&#34;</span>)
window<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Music Player&#34;</span>)
window<span style="color:#f92672">.</span>iconbitmap(<span style="color:#e6db74">&#34;images/coderdojo.ico&#34;</span>)
window<span style="color:#f92672">.</span>configure(background <span style="color:#f92672">=</span> bg_color)</code></pre></div>
<h2 id="text-anzeigen">Text anzeigen</h2>

<p>So wie im Bild zu Beginn zeigen wir einen Text an für den wir auch die Schriftart, Größe und Farbe anpassen können. Der Text wird in einem sogenannten Label dargestellt.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Text anzeigen</span>
text <span style="color:#f92672">=</span> Label(window, text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Let&#39;s make music!&#34;</span>,
             font <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#34;Comic Sans MS&#34;</span>, <span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#34;bold&#34;</span>),
             fg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>, bg <span style="color:#f92672">=</span> bg_color)
text<span style="color:#f92672">.</span>pack()</code></pre></div>
<h2 id="tasten-platzieren">Tasten platzieren</h2>

<p>Unter dem Text kommen drei Tasten, mit denen wir das Abspielen der Musik steuern können. Würden wir alle Tasten mit der Methode pack im Fenster platzieren, so würden sie alle untereinander dargestellt werden. Es ist daher besser einen eigenen Rahmen (<code>Frame</code>) zu erstellen, in dem wir dann die Tasten  mit <code>grid</code> in einer Zeile anordnen können. Die Optionen <code>padx</code> und <code>pady</code> regeln den Abstand zu den anderen Elementen.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Rahmen für Tasten</span>
frame <span style="color:#f92672">=</span> Frame(window, bg <span style="color:#f92672">=</span> bg_color)
frame<span style="color:#f92672">.</span>pack(padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, pady<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)</code></pre></div>
<p>Für jede Taste laden wir zuerst das Bild aus unserem images – Ordner und erzeugen dann damit einen Button in unserem Rahmen.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Play Taste</span>
play_photo <span style="color:#f92672">=</span> PhotoImage(file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/play.png&#34;</span>)
play_button <span style="color:#f92672">=</span> Button(frame, image <span style="color:#f92672">=</span> play_photo, command <span style="color:#f92672">=</span> play_music)
play_button<span style="color:#f92672">.</span>grid(row<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, column<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e"># Stop Taste</span>
stop_photo <span style="color:#f92672">=</span> PhotoImage(file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/stop.png&#34;</span>)
stop_button <span style="color:#f92672">=</span> Button(frame, image <span style="color:#f92672">=</span> stop_photo, command <span style="color:#f92672">=</span> stop_music)
stop_button<span style="color:#f92672">.</span>grid(row <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, column <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e"># Pause Taste</span>
pause_photo <span style="color:#f92672">=</span> PhotoImage(file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/pause.png&#34;</span>)
pause_button <span style="color:#f92672">=</span> Button(frame, image <span style="color:#f92672">=</span> pause_photo, command <span style="color:#f92672">=</span> pause_music)
pause_button<span style="color:#f92672">.</span>grid(row <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, column <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)</code></pre></div>
<p>Du kannst den Code zwischendurch immer wieder testen, indem du das Programm mit F5 laufen lässt. Du wirst sehen, dass die Tasten vorhanden sind und man auch darauf klicken kann, aber sie führen noch keine Funktion aus. Wie denn auch, wir haben das ja auch noch nicht programmiert. Das kommt etwas später,  zuerst ergänzen wir aber noch unser Interface.</p>

<h2 id="lautstärkeregler">Lautstärkeregler</h2>

<p>Ein Musicplayer muss natürlich auch in der Lage sein, die Lautstärke zu verändern. Dazu verwenden wir einen Schieberegler, den wir mit Hilfe von Scale bekommen. Den Bereich des Reglers wählen wir von 0 – 100 und setzen unseren Ausgangswert auf 70.  Das alleine reicht aber noch nicht, wir müssen auch unserem Mixer sagen, dass er die Lautstärke anpassen muss. Der Mixer hat einen Bereich von 0 – 1 für die Lautstärke, d.h. unser Wert 70 auf dem Regler entspricht 0.7 für den Mixer.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Lautstärke</span>
volume <span style="color:#f92672">=</span> Scale(window, from_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, to <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>, orient<span style="color:#f92672">=</span>HORIZONTAL, bg <span style="color:#f92672">=</span> bg_color,
               command <span style="color:#f92672">=</span> set_volume)
volume<span style="color:#f92672">.</span>pack(pady<span style="color:#f92672">=</span><span style="color:#ae81ff">15</span>)
volume<span style="color:#f92672">.</span>set(<span style="color:#ae81ff">70</span>)
mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>set_volume(<span style="color:#ae81ff">0.7</span>)</code></pre></div>
<h2 id="statuszeile">Statuszeile</h2>

<p>Ganz unten im Fenster bekommt unser Musicplayer noch eine Statuszeile, wo wir dann z. B. auch den Songtitel anzeigen können. Grundsätzlich wird die Statuszeile wieder in ein Label gepackt, das wir ganz unten über die ganze Fensterbreite platzieren. Als Starttext zeigen wir zunächst „Welcome to Musicplayer“ an.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Statuszeile</span>
statusbar <span style="color:#f92672">=</span> Label(window, text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Welcome to Musicplayer&#34;</span>,
                  relief<span style="color:#f92672">=</span>SUNKEN, anchor<span style="color:#f92672">=</span>W,
                  font<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#34;Calibri&#34;</span>, <span style="color:#ae81ff">10</span>, <span style="color:#e6db74">&#34;italic&#34;</span>))
statusbar<span style="color:#f92672">.</span>pack(side<span style="color:#f92672">=</span>BOTTOM, fill <span style="color:#f92672">=</span> X)</code></pre></div>
<h2 id="die-tasten-mit-funktionen-belegen">Die Tasten mit Funktionen belegen</h2>

<p>Nun ist es an der Zeit, unseren Tasten die Funktionalität zu geben, die man von ihnen erwartet. Für jede Taste schreiben wir eine Funktion, die wir dann dem jeweiligen Button übergeben. Schreibe diese Funktion am Beginn deines Codes, nachdem du die Packages geladen hast.</p>

<p>Wir beginnen mit der Stop-Taste, die am einfachsten zu programmieren ist. Wir müssen nur den Mixer stoppen und zeigen auch in der Statuszeile an, dass die Musik gestoppt wurde.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">stop_music</span>():
    mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>stop()
    statusbar[<span style="color:#e6db74">&#34;text&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Music stopped&#34;</span></code></pre></div>
<p>Bei der Pause-Taste müssen wir noch zusätzlich unsere Variable paused auf True setzen. Damit wir den Wert dieser Variable auch außerhalb dieser Funktion kennen, verwenden wir dazu eine globale Variable.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pause_music</span>():
    <span style="color:#66d9ef">global</span> paused
    paused <span style="color:#f92672">=</span> True
    mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>pause()
    statusbar[<span style="color:#e6db74">&#34;text&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Music paused&#34;</span></code></pre></div>
<p>Mit der Play-Taste ist es etwas komplexer, weil wir unterscheiden müssen, ob der Song von Beginn weg gespielt wird, oder ob die Wiedergabe nach einer Pause einfach weiterläuft. Für die Wiedergabe verwenden wir unseren Song, der im Verzeichnis music gespeichert ist. (Später werden wir aber eine Möglichkeit einbauen, wie man einen Song aus einem beliebigen Verzeichnis laden kann.) In der Statuszeile zeigen wir den Songtitel an, den wir über den <code>basename</code> des Dateipfades bekommen.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">play_music</span>():
    <span style="color:#66d9ef">global</span> paused
    <span style="color:#66d9ef">if</span> paused:
        mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>unpause()
        paused <span style="color:#f92672">=</span> False
        statusbar[<span style="color:#e6db74">&#34;text&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Playing music: &#34;</span> <span style="color:#f92672">+</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>basename(filename)
    <span style="color:#66d9ef">else</span>:
        mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>load(filename)
        mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>play()
        statusbar[<span style="color:#e6db74">&#34;text&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Playing music: &#34;</span> <span style="color:#f92672">+</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>basename(filename)</code></pre></div>
<p>Schließlich fehlt noch eine Funktion für unseren Lautstärkeregler. Zu berücksichtigen ist, dass der Schieberegler Werte zwischen 0 und 100 verwendet, im Mixer aber nur ein Bereich von 0 – 1 zur Verfügung steht. Wir rechnen daher vorher den Eingabewert aus dem Regler (value) um.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">set_volume</span>(value):
    volume <span style="color:#f92672">=</span> int(value)<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>
    mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>set_volume(volume)</code></pre></div>
<p>Nun haben wir alle notwendigen Funktionen definiert und müssen sie nur bei den passenden Buttons einbauen. Mit der Option <code>command</code> kann man diese Funktionen zuweisen. Ergänze diese in den drei Buttons und im Lautstärkeregler.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Play Taste</span>
play_photo <span style="color:#f92672">=</span> PhotoImage(file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/play.png&#34;</span>)
play_button <span style="color:#f92672">=</span> Button(frame, image <span style="color:#f92672">=</span> play_photo, command <span style="color:#f92672">=</span> play_music)
play_button<span style="color:#f92672">.</span>grid(row<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, column<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e"># Stop Taste</span>
stop_photo <span style="color:#f92672">=</span> PhotoImage(file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/stop.png&#34;</span>)
stop_button <span style="color:#f92672">=</span> Button(frame, image <span style="color:#f92672">=</span> stop_photo, command <span style="color:#f92672">=</span> stop_music)
stop_button<span style="color:#f92672">.</span>grid(row <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, column <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e"># Pause Taste</span>
pause_photo <span style="color:#f92672">=</span> PhotoImage(file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/pause.png&#34;</span>)
pause_button <span style="color:#f92672">=</span> Button(frame, image <span style="color:#f92672">=</span> pause_photo, command <span style="color:#f92672">=</span> pause_music)
pause_button<span style="color:#f92672">.</span>grid(row <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, column <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, padx<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e"># Lautstärke</span>
volume <span style="color:#f92672">=</span> Scale(window, from_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, to <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>, orient<span style="color:#f92672">=</span>HORIZONTAL, bg <span style="color:#f92672">=</span> bg_color,
               command <span style="color:#f92672">=</span> set_volume)
volume<span style="color:#f92672">.</span>pack(pady<span style="color:#f92672">=</span><span style="color:#ae81ff">15</span>)
volume<span style="color:#f92672">.</span>set(<span style="color:#ae81ff">70</span>)
mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>set_volume(<span style="color:#ae81ff">0.7</span>)</code></pre></div>
<h2 id="ein-menü-für-unseren-musicplayer">Ein Menü für unseren Musicplayer</h2>

<p>Der folgende Code erzeugt ein Menü für unser Fenster mit den Einträgen „File“ und „Help“. Unter File können wir „Open“ und „Exit“ auswählen.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Menü</span>
menubar <span style="color:#f92672">=</span> Menu(window)
window<span style="color:#f92672">.</span>config(menu <span style="color:#f92672">=</span> menubar)

submenu <span style="color:#f92672">=</span> Menu(menubar, tearoff <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
menubar<span style="color:#f92672">.</span>add_cascade(label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;File&#34;</span>, menu <span style="color:#f92672">=</span> submenu)
submenu<span style="color:#f92672">.</span>add_command(label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Open&#34;</span>, command <span style="color:#f92672">=</span> browse_file)
submenu<span style="color:#f92672">.</span>add_command(label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Exit&#34;</span>, command <span style="color:#f92672">=</span> exit_player)

submenu <span style="color:#f92672">=</span> Menu(menubar, tearoff <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
menubar<span style="color:#f92672">.</span>add_cascade(label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Help&#34;</span>, menu <span style="color:#f92672">=</span> submenu)
submenu<span style="color:#f92672">.</span>add_command(label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;About us&#34;</span>, command <span style="color:#f92672">=</span> about_us)</code></pre></div>
<p>Wählt man Exit, wird die Musik gestoppt und das Fenster geschlossen. Über Open sollte die Auswahl einer Musik-Datei möglich sein und im Eintrag Help können wir über die Auswahl von „About us“ eine Information über unseren Musicplayer anzeigen. Die dafür notwendigen Funktionen werden nun definiert und unter den bereits vorhandenen Funktionen platziert:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">browse_file</span>():
    <span style="color:#66d9ef">global</span> filename
    filename <span style="color:#f92672">=</span> filedialog<span style="color:#f92672">.</span>askopenfilename()

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exit_player</span>():
    mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>stop()
    window<span style="color:#f92672">.</span>destroy()

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">about_us</span>():
    tkinter<span style="color:#f92672">.</span>messagebox<span style="color:#f92672">.</span>showinfo(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;About Music Player&#34;</span>,
    message <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;This is a music player build with Python.&#34;</span>)</code></pre></div>
<h2 id="anpassen-der-play-taste">Anpassen der Play-Taste</h2>

<p>Über das Menü haben wir jetzt die Möglichkeit eine Datei aus einem beliebigen Verzeichnis auszuwählen. Wir müssen also nicht mehr unseren Song als <code>filename</code> angeben, sondern nehmen die Datei, die der User auswählt.</p>

<p>Was passiert aber, wenn der User auf Play klickt ohne vorher eine Datei auszuwählen?
Dann geben wir eine passende Fehlermeldung aus.</p>

<p>Unsere Funktion <code>play_music</code> sieht in der Endversion dann so aus:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">play_music</span>():
    <span style="color:#66d9ef">global</span> paused
    <span style="color:#66d9ef">if</span> paused:
        mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>unpause()
        paused <span style="color:#f92672">=</span> False
        statusbar[<span style="color:#e6db74">&#34;text&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Playing music: &#34;</span> <span style="color:#f92672">+</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>basename(filename)
    <span style="color:#66d9ef">else</span>:
        <span style="color:#66d9ef">try</span>:     
            mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>load(filename)
            mixer<span style="color:#f92672">.</span>music<span style="color:#f92672">.</span>play()
            statusbar[<span style="color:#e6db74">&#34;text&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Playing music: &#34;</span> <span style="color:#f92672">+</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>basename(filename)
        <span style="color:#66d9ef">except</span>:
            tkinter<span style="color:#f92672">.</span>messagebox<span style="color:#f92672">.</span>showerror(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;File not found&#34;</span>, \
                    message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Please load a file first.&#34;</span>)</code></pre></div>
<h2 id="aktivierung-des-fensters">Aktivierung des Fensters</h2>

<p>Zu guter Letzt gibt es noch einen Befehl, um das Fenster zu aktivieren:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Aktivierung des Fensters</span>
window<span style="color:#f92672">.</span>mainloop()</code></pre></div>
<p>Nun kannst du das Programm noch einmal testen und deine Lieblingsmusik genießen.</p>

<h2 id="erweiterungsmöglichkeiten">Erweiterungsmöglichkeiten</h2>

<p>Du kannst aus deinem Python-Programm auch eine exe-Datei erzeugen. Diese Datei könntest du auch an deine Freunde weitergeben, die dann deinen Musicplayer auch verwenden können ohne Python zu installieren.</p>

<p>Dazu brauchst du das Package <code>cx_Freeze</code>, das du wieder über die Kommandozeile (so wie pygame) installieren kannst.</p>

<p>Dann legst du dir eine neue Python-Datei <code>setup.py</code> an, in der du folgenden Code schreibst. Achte darauf, dass der Dateiname in der letzen Zeile mit dem Dateinamen deines Musicplayers übereinstimmt.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> sys
<span style="color:#f92672">from</span> cx_Freeze <span style="color:#f92672">import</span> setup, Executable

build_exe_options <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;packages&#34;</span>: [<span style="color:#e6db74">&#34;os]}</span>

base <span style="color:#f92672">=</span> None
<span style="color:#66d9ef">if</span> sys<span style="color:#f92672">.</span>platform <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;win32&#34;</span>:
    base <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Win32GUI&#34;</span>

setup(  name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Musicplayer&#34;</span>,
        version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0.1&#34;</span>,
        description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Python Music Player&#34;</span>,
        options <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;build_exe&#34;</span>: build_exe_options},
        executables <span style="color:#f92672">=</span> [Executable(<span style="color:#e6db74">&#34;Musicplayer.pyw&#34;</span>, base<span style="color:#f92672">=</span>base)])</code></pre></div>
<p>Führe dann in der Kommandozeile folgenden Befehl aus:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">py setup.py build</code></pre></div>
<p>Damit wird ein neuer Ordner „build“ erzeugt, in dem du auch eine .exe Datei findest. Damit diese Anwendung auch richtig ausgeführt werden kann, musst du noch deinen gesamten Ordner mit den Bildern in das Verzeichnis der exe-Datei kopieren. Das sieht dann in etwa so aus:</p>




     
    










<div class="row">
    <div class="col">
        <p></p>
    </div>
    <div class="col-12 col-md-12">
    <img src="/uebungsanleitungen/programmieren/python/music-player/img/build-folder.png" alt="(.Get 1)" class="mx-auto " style="display: block; width: auto" />
    </div>
</div>


<h2 id="installieren-von-packates">Installieren von Packates</h2>

<p>Hier kannst du den gesamten <a href="source/Musicplayer.pyw" target="_blank">Sourcecode downloaden</a>.</p>
 </div>
        </div>
    </div>
</section>  
    <footer>
        <div class="container">
            <div class="row">
                <div class="col">
                    <div>
                        <div>
                            <img src="/img/logo-coding-club-linz-white.svg">
                        </div>
                        <div>Coding Club Linz<br />Birkenweg 16, 4060 Leonding <br />
                            <a href="mailto:info@linz.coderdojo.net">info@linz.coderdojo.net</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer> <!-- Js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/locale/de-at.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <script src="https://linz.coderdojo.net/js/wow.min.js"></script>
    <script src="https://linz.coderdojo.net/js/main.js"></script>
</body>

</html>
