<!DOCTYPE html>
<html class="no-js" lang="de-AT">


<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63326882-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-63326882-1');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Monster Run </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="generator" content="Hugo 0.73.0" /> <!-- Fonts -->

    

    

    

    

    

    
    <link rel="canonical" href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/web/monster-run/" />
    

    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,500,600,700,800' rel='stylesheet'
        type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet"> <!-- Stylesheets -->
     
    
    <link rel="stylesheet" href="https://linz.coderdojo.net/vendor.min.55a3cbb6f035c25e5c7cf706ee053eca6f5a54d8095b05fd737d1b0330f99eaf.css">
    <link rel="stylesheet" href="https://linz.coderdojo.net/css/animate.css">
     
     
    <link rel="stylesheet" href="https://linz.coderdojo.net/style.min.2d254dc216c4060d13406489b4d23b8b85b904a9eecbc040b103ad0eb5057858.css">
    <script src="https://kit.fontawesome.com/5bb5b2cc9c.js" crossorigin="anonymous"></script>
</head>

<body id="body">
    <!-- NAVIGATION -->

<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light ">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"><img src="/img/logo-linz.png" height="30"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/termine">Termine</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/info">Infos</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/mentoren">Mentoren</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/sponsoring">Sponsoring</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/uebungsanleitungen">Übungsanleitungen</a>
                </li>
            </ul>
        </div>
    </div>
</nav>  
     
     

<div class="container-fluid breadcrumb-container">
    <div class="container">
        <nav class="breadcrumb-nav" aria-label="breadcrumb">
        <ol class="breadcrumb">
            
        
        
        
        
        
        
        
        
        

        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/">Übungsanleitungen</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/">Programmieren</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/web/">Web</a>
        </li>
        
        
        
        

        
        
        
        
        </ol>

        
        </nav>
    </div>
</div> 

<section id="sushi">
    <div class="container">
        <div class="row">
            
            <div class="col-12 sushi-toc">
                <h2>Inhalt</h2>
                <nav id="TableOfContents">
<ul>
<li><a href="#monster-run">Monster Run</a>
<ul>
<li><a href="#einleitung">Einleitung</a></li>
<li><a href="#spielhintergrund">Spielhintergrund</a></li>
<li><a href="#monster">Monster</a></li>
<li><a href="#angriff">Angriff</a></li>
<li><a href="#gehen">Gehen</a></li>
<li><a href="#hintergrund-wechseln">Hintergrund wechseln</a></li>
<li><a href="#fertige-übung">Fertige Übung</a></li>
</ul></li>
</ul>
</nav>
            </div>
            <div class="col-12 sushi-content"> 

<h1 id="monster-run">Monster Run</h1>

<h2 id="einleitung">Einleitung</h2>




     
    








<div class="row">
    <div class="col">
        <p><p>Wisst ihr was ein Jump &lsquo;n&rsquo; Run-Spiel ist? Man steuert als Spielerin oder Spieler eine kleine Figur und läuft mir ihr durch ein Labyrinth. Meistens muss sich dabei gegen verschiedene Gegner behaupten. In diesem Workshop zeigt euch Rainer Grundlagen, die man zum Programmieren eines Jump &lsquo;n&rsquo; Run in p5js braucht. Er baut mich euch einen <em>Monsterspaziergang</em>.</p>

<h2 id="grafiken">Grafiken</h2>

<p>In dieser Übung verwenden wir Grafiken der Plattform <a href="https://craftpix.net/" target="_blank"><em>craftpix.net</em></a>. Du findest dort viele Grafiken für Spiele aller Art. Einige der Grafik-Pakete gibt es auch <a href="https://craftpix.net/freebies/" target="_blank">kostenlos</a>. In diesem Spiel verwenden wir die Bilder aus folgenden, kostenlosen Paketen:</p>

<ul>
<li><a href="https://craftpix.net/freebies/free-halloween-2d-game-backgrounds/" target="_blank">Halloween 2D Game Backgrounds</a></li>
<li><a href="https://craftpix.net/freebies/free-minotaur-tiny-style-2d-sprites/" target="_blank">Minotaur Tiny Style 2D Sprites</a></li>
</ul>
</p>
    </div>
    <div class="col-12 col-md-5">
    <img src="/uebungsanleitungen/programmieren/web/monster-run/img/monster-walk.gif" alt="(.Get 1)" class="mx-auto ml-md-auto mr-md-0" style="display: block; width: auto" />
    </div>
</div>


<h2 id="spielhintergrund">Spielhintergrund</h2>




     
    








<div class="row">
    <div class="col">
        <p><p>Öffne <a href="https://stackblitz.com/edit/monster-run-starter" target="_blank">https://stackblitz.com/edit/monster-run-starter</a> im Browser. Der TypeScript-Code ist noch unvollständig. Wir werden ihn in dieser Übung vervollständigen.</p>

<p>Als erstes möchten wir den Spielhintergrund laden. Lege vier Variablen <strong>unmittelbar vor</strong> der Funktion <code>preload</code> an:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#00f">let</span> background: <span style="color:#2b91af">Background</span>;
<span style="color:#00f">let</span> maxX: <span style="color:#2b91af">number</span>;
<span style="color:#00f">let</span> minX: <span style="color:#2b91af">number</span>;
<span style="color:#00f">let</span> currentBackground = 1;
</code></pre></div></p>
    </div>
    <div class="col-12 col-md-5">
    <img src="/uebungsanleitungen/programmieren/web/monster-run/img/hintergrund.png" alt="(.Get 1)" class="mx-auto ml-md-auto mr-md-0" style="display: block; width: auto" />
    </div>
</div>


<p>Wir haben vier Hintergrundbilder für dich vorbereitet. Wir müssen in <code>preload</code> diese Bilder laden. Dazu fügen wir <strong>in</strong> die Funktion <code>preload</code> folgenden Code ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">background = <span style="color:#00f">new</span> Background(p);
background.addImage(<span style="color:#a31515">&#39;B1&#39;</span>, assetBase + <span style="color:#a31515">&#39;1_game_background/1_game_background.png&#39;</span>);
background.addImage(<span style="color:#a31515">&#39;B2&#39;</span>, assetBase + <span style="color:#a31515">&#39;2_game_background/2_game_background.png&#39;</span>);
background.addImage(<span style="color:#a31515">&#39;B3&#39;</span>, assetBase + <span style="color:#a31515">&#39;3_game_background/3_game_background.png&#39;</span>);
background.addImage(<span style="color:#a31515">&#39;B4&#39;</span>, assetBase + <span style="color:#a31515">&#39;4_game_background/4_game_background.png&#39;</span>);
background.activateImage(<span style="color:#a31515">`B</span><span style="color:#a31515">${</span>currentBackground<span style="color:#a31515">}</span><span style="color:#a31515">`</span>);
maxX = background.width - 250 * background.scale; <span style="color:#008000">// äußerst rechte Position berechnen
</span><span style="color:#008000"></span>minX = -520 * background.scale; <span style="color:#008000">// äußerst linke Position berechnen
</span></code></pre></div>
<p><strong>In</strong> der Funktion <code>setup</code> müssen wir die Zeichenfläche mit der richtigen Größe anlegen. Dafür fügen wir folgenden Code <strong>in</strong> der Funktion <code>setup</code> ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">p.createCanvas(background.width, background.height);
</code></pre></div>
<p>Als letztes müssen wir den Hintergrund auf den Bildschirm malen. Dazu fügen wir folgenden Code <strong>in</strong> der Funktion <code>draw</code> ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">p.background(background.currentImage);
</code></pre></div>
<p>Jetzt müsstest du schon den Spielhintergrund sehen. Wenn du den Inhalt der Variable <code>currentBackground</code> änderst, kannst du zwischen den Hintergründen umschalten. Du kannst zwischen den Hintergründen 1, 2, 3 und 4 wählen.</p>

<h2 id="monster">Monster</h2>




     
    








<div class="row">
    <div class="col">
        <p><p>Jetzt möchten wir unser Monster hinzufügen. Das Monster soll sich aber bewegen, nicht nur als Bild zu sehen sein. Dafür verwenden wir Animationen. Eine Animation ist eine rasche Abfolge von Einzelbildern und funktioniert damit ganz ähnlich wie ein Film am Bildschirm. In der Animation siehst du, wie die Animation fürs Gehen unseres Monsters aussieht.</p>

<p>Füge als erstes folgende Variablen an. Mach das dort, wo du schon oben die Variablen für den Hintergrund angelegt hast (<strong>unmittelbar vor</strong> der Funktion <code>preload</code>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#00f">let</span> monster: <span style="color:#2b91af">Sprite</span>;
<span style="color:#00f">const</span> monsterId = 3;
<span style="color:#00f">let</span> walkingSpeed = 15;
</code></pre></div>
<p>Als nächstes füge <strong>an das Ende</strong> der Funktion <code>preload</code> folgenden Code ein. Er lädt die erste Animation, die abgespielt werden soll, wenn unser Monster untätig herumsteht.</p>
</p>
    </div>
    <div class="col-12 col-md-5">
    <img src="/uebungsanleitungen/programmieren/web/monster-run/img/monster.gif" alt="(.Get 1)" class="mx-auto ml-md-auto mr-md-0" style="display: block; width: auto" />
    </div>
</div>

<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">monster = <span style="color:#00f">new</span> Sprite(p, 720, 490, background.scale);

<span style="color:#00f">let</span> images: <span style="color:#2b91af">string</span>[];
images = [];
<span style="color:#00f">for</span> (<span style="color:#00f">let</span> i = 0; i &lt; 11; i++) images.push(buildImageName(monsterId, <span style="color:#a31515">&#39;Idle&#39;</span>, i));
monster.addAnimation(<span style="color:#a31515">&#39;idle&#39;</span>, images, 100);

monster.activateAnimation(<span style="color:#a31515">&#39;idle&#39;</span>);
monster.x = -55 * background.scale;
monster.y = background.height * 0.95 - 490 * background.scale;
walkingSpeed *= background.scale;
</code></pre></div>
<p>Um das Monster auf den Bildschirm zu zeichnen, füge <strong>an das Ende</strong> der Funktion <code>draw</code> folgenden Code ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">monster.draw();
</code></pre></div>
<h2 id="angriff">Angriff</h2>

<p>Um die Arbeit mit Animationen zu üben, fügen wir jetzt noch eine Animation für einen Angriff ein. Suche dir in der <code>preload</code>-Funktion den Code heraus, mit dem die <em>Idle</em>-Animation eingefügt wird. Nach dem gleichen Muster fügst du die <em>Attacking</em>-Funktion hinzu:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">...
images = [];
<span style="color:#00f">for</span> (<span style="color:#00f">let</span> i = 0; i &lt; 11; i++) images.push(buildImageName(monsterId, <span style="color:#a31515">&#39;Idle&#39;</span>, i));
monster.addAnimation(<span style="color:#a31515">&#39;idle&#39;</span>, images, 100); <span style="color:#008000">// &lt;&lt;&lt; BIS HIERHER HAST DU DEN CODE SCHON
</span><span style="color:#008000"></span>
<span style="color:#008000">// AB HIER MUSST DU DEN CODE EINFÜGEN
</span><span style="color:#008000"></span>images = [];
<span style="color:#00f">for</span> (<span style="color:#00f">let</span> i = 0; i &lt; 11; i++) images.push(buildImageName(monsterId, <span style="color:#a31515">&#39;Attacking&#39;</span>, i));
monster.addAnimation(<span style="color:#a31515">&#39;attacking&#39;</span>, images, 40);
...
</code></pre></div>
<p>Die Attacke soll ablaufen, wenn man die Leertaste (Key Code 32) drückt. Damit das geht, fügen wir <strong>vor</strong> der <code>monster.draw();</code>-Zeile in <code>draw</code> folgenden Code ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#00f">if</span> (p.keyIsDown(32)) {
  monster.activateAnimation(<span style="color:#a31515">&#39;attacking&#39;</span>);
}  <span style="color:#00f">else</span> {
  monster.activateAnimation(<span style="color:#a31515">&#39;idle&#39;</span>);
}
</code></pre></div>
<p>Probiere es aus und drücke die Leertaste (du kannst sie auch gedrückt halten, um einen längeren Angriff zu starten). Klappt die Animation?</p>

<h2 id="gehen">Gehen</h2>

<p>Jetzt bist du schon erfahren mit Animationen, also sind wir bereit für den letzten Teil unserer Übung. Wir wollen unser Monster herumgehen lassen.</p>

<p>Füge <strong>in</strong> die Funktion <code>preload</code> das Laden einer dritten Animation ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts">images = [];
<span style="color:#00f">for</span> (<span style="color:#00f">let</span> i = 0; i &lt; 17; i++) images.push(buildImageName(monsterId, <span style="color:#a31515">&#39;Walking&#39;</span>, i));
monster.addAnimation(<span style="color:#a31515">&#39;walking&#39;</span>, images, 20);
</code></pre></div>
<p>Wir wollen unser Monster mit den Cursortasten steuern. Dafür <strong>ändern</strong> wir den Code, den wir für die Attacke gerade vorhin angelegt haben, wie folgt (in Funktion <code>draw</code>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#00f">if</span> (p.keyIsDown(p.RIGHT_ARROW)) {
  monster.activateAnimation(<span style="color:#a31515">&#39;walking&#39;</span>);
  monster.flip = <span style="color:#00f">false</span>;
  monster.x += walkingSpeed;
} <span style="color:#00f">else</span> <span style="color:#00f">if</span> (p.keyIsDown(p.LEFT_ARROW)) {
  monster.activateAnimation(<span style="color:#a31515">&#39;walking&#39;</span>);
  monster.flip = <span style="color:#00f">true</span>;
  monster.x -= walkingSpeed;
} <span style="color:#00f">else</span> <span style="color:#00f">if</span> (p.keyIsDown(32)) {
  monster.activateAnimation(<span style="color:#a31515">&#39;attacking&#39;</span>);
} <span style="color:#00f">else</span> {
  monster.activateAnimation(<span style="color:#a31515">&#39;idle&#39;</span>);
}
</code></pre></div>
<p>Probiere es aus und lass dein Monster herumspazieren.</p>

<h2 id="hintergrund-wechseln">Hintergrund wechseln</h2>

<p>Zum Abschluss möchten wir unser Monster von einem &ldquo;Raum&rdquo; in einen anderen gehen lassen. Dazu schalten wir zwischen den Hintergründen um. Füge dazu <strong>vor</strong> der <code>monster.draw();</code>-Zeile in <code>draw</code> folgenden Code ein:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#00f">if</span> (monster.x &gt; maxX) {
  <span style="color:#00f">if</span> (currentBackground &lt; 4) {
    background.activateImage(<span style="color:#a31515">`B</span><span style="color:#a31515">${</span>++currentBackground<span style="color:#a31515">}</span><span style="color:#a31515">`</span>);
    monster.x = minX;
  } <span style="color:#00f">else</span> {
    monster.x = maxX;
  }
} <span style="color:#00f">else</span> <span style="color:#00f">if</span> (monster.x &lt; minX) {
  <span style="color:#00f">if</span> (currentBackground &gt; 1) {
    background.activateImage(<span style="color:#a31515">`B</span><span style="color:#a31515">${</span>--currentBackground<span style="color:#a31515">}</span><span style="color:#a31515">`</span>);
    monster.x = maxX;
  } <span style="color:#00f">else</span> {
    monster.x = minX;
  }
}
</code></pre></div>
<p>Juhuu, geschafft. Jetzt kannst du mit deinem Monster zwischen den Hintergründen herumgehen, indem du ganz nach rechts oder ganz nach links gehst.</p>

<h2 id="fertige-übung">Fertige Übung</h2>

<p>Du kannst die fertige Übung unter <a href="https://stackblitz.com/edit/monster-run" target="_blank">https://stackblitz.com/edit/monster-run</a> ansehen.</p>
 </div>
        </div>
    </div>
</section>  
    <footer>
        <div class="container">
            <div class="row">
                <div class="col">
                    <div>
                        <div>
                            <img src="/img/logo-coding-club-linz-white.svg">
                        </div>
                        <div>Coding Club Linz<br />Birkenweg 16, 4060 Leonding <br />
                            <a href="mailto:info@linz.coderdojo.net">info@linz.coderdojo.net</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer> <!-- Js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/locale/de-at.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <script src="https://linz.coderdojo.net/js/wow.min.js"></script>
    <script src="https://linz.coderdojo.net/js/main.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6LfXNMcZAAAAALYnf3GpUqw5uotVMyjhLNU438i9"></script>
</body>

</html>
