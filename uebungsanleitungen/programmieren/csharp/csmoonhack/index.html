<!DOCTYPE html>
<html class="no-js" lang="de-AT">


<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63326882-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-63326882-1');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Moonhack für C# </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="generator" content="Hugo 0.136.5"> <!-- Fonts -->

    

    

    

    

    

    
    <link rel="canonical" href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/csharp/csmoonhack/" />
    

    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,500,600,700,800' rel='stylesheet'
        type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet"> <!-- Stylesheets -->
     
    
    <link rel="stylesheet" href="https://linz.coderdojo.net/vendor.min.427db798bc1fd8e87412688ee1bc17b146a8ab9607228f687fa08070b18c0575.css">
    <link rel="stylesheet" href="https://linz.coderdojo.net/css/animate.css">
     
     
    <link rel="stylesheet" href="https://linz.coderdojo.net/style.min.a2e6859e8cb9160bace1b028b41c1206669c8ff293c2ad7667b894b27390b461.css">
    <script src="https://kit.fontawesome.com/5bb5b2cc9c.js" crossorigin="anonymous"></script>
</head>

<body id="body">
    <!-- NAVIGATION -->

<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light   ">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"><img src="/img/logo-linz.png" height="30"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item   ">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item   ">
                    <a class="nav-link" href="/termine">Termine</a>
                </li>
                <li class="nav-item   ">
                    <a class="nav-link" href="/info">Infos</a>
                </li>
                <li class="nav-item   ">
                    <a class="nav-link" href="/mentoren">Mentoren</a>
                </li>
                <li class="nav-item   ">
                    <a class="nav-link" href="/sponsoring">Sponsoring</a>
                </li>
                <li class="nav-item  active ">
                    <a class="nav-link" href="/uebungsanleitungen">Übungsanleitungen</a>
                </li>
            </ul>
        </div>
    </div>
</nav>  
     
     

<div class="container-fluid breadcrumb-container">
    <div class="container">
        <nav class="breadcrumb-nav" aria-label="breadcrumb">
        <ol class="breadcrumb">
            
        
        
        
        
        
        
        
        
        

        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/">Übungsanleitungen</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/">Programmieren</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz.coderdojo.net/uebungsanleitungen/programmieren/csharp/">C#</a>
        </li>
        
        
        
        

        
        
        
        
        </ol>

        
        </nav>
    </div>
</div> 

<section id="sushi">
    <div class="container">
        <div class="row">
            
            <div class="col-12 sushi-toc">
                <h2>Inhalt</h2>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#einrichtung-der-programmierumgebung">Einrichtung der Programmierumgebung</a></li>
    <li><a href="#anlegen-des-projekts">Anlegen des Projekts</a></li>
    <li><a href="#anpassen-des-erstellten-codes">Anpassen des erstellten Codes</a></li>
    <li><a href="#content-hinzufügen">Content hinzufügen</a></li>
    <li><a href="#variablen-und-vorbereiten-des-spielfelds">Variablen und vorbereiten des Spielfelds</a></li>
    <li><a href="#laden-des-content">Laden des Content</a></li>
    <li><a href="#die-hauptschleife-des-spiels-update-und-draw">Die Hauptschleife des Spiels (Update und Draw)</a></li>
    <li><a href="#erweiterungen">Erweiterungen</a></li>
  </ul>
</nav>
            </div>
            <div class="col-12 sushi-content"> <h1 id="lande-auf-dem-mond---mit-c">Lande auf dem Mond - mit C#</h1>
<p>Damit das Spiel möglichst wie sein Scratch-Zwilling aussieht, kannst du die gleichen Grafiken und Sounds verwenden:</p>
<ul>
<li>Den <a href="assets/backdrop1.png">Hintergrund</a></li>
<li>Das <a href="assets/lunar_lander_sheet.png">Spritesheet für den Lunar Lander</a></li>
<li>Die Audiodateien für <a href="assets/thruster.wav">das Triebwerk</a>, <a href="assets/landed.wav">die erfolgreiche Landung</a> sowie <a href="assets/problem.wav">die Bruchlandung</a></li>
</ul>
<h2 id="einrichtung-der-programmierumgebung">Einrichtung der Programmierumgebung</h2>
<p>Du benötigst lokal:</p>
<ul>
<li>dotnet (<a href="https://dotnet.microsoft.com/en-us/download/dotnet/8.0" target="_blank">net8.0</a>)</li>
<li>eine IDE wie z.B. <a href="https://my.visualstudio.com/" target="_blank">Visual Studio</a>, <a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> oder <a href="https://www.jetbrains.com/rider/" target="_blank">Jetbrains Rider</a></li>
<li>Unter macOS brauchst du zusätzlich Xcode (aus dem App Store)</li>
</ul>
<p>Sobald das alles installiert ist, richten wir die <code>dotnet new</code> - Templates (Vorlagen) für MonoGame ein:</p>
<pre tabindex="0"><code>dotnet new install &#34;MonoGame.Templates.CSharp&#34;
</code></pre><p>Dann können wir schon loslegen und ein neues, leeres MonoGame-Projekt erstellen.</p>
<h2 id="anlegen-des-projekts">Anlegen des Projekts</h2>



     
    








<div class="row">
    <div class="col">
        <p>Das geht relativ einfach, indem man entweder in der IDE ein Template auswählt.</p>
    </div>
    <div class="col-12 col-md-3">
    <img src="/uebungsanleitungen/programmieren/csharp/csmoonhack/img/new_project.png" alt="(.Get 1)" class="mx-auto ml-md-auto mr-md-0" style="display: block; width: auto" />
    </div>
</div>

<p>Alternativ kann man das auch von Hand machen (z. B. mit VS Code). Schaut euch einfach die verfügbaren Templates an:</p>
<pre tabindex="0"><code>&gt; dotnet new list monogame
These templates matched your input: &#39;monogame&#39;

Template Name                                Short Name   Language  Tags                                      
-------------------------------------------  -----------  --------  ------------------------------------------
MonoGame Android Application                 mgandroid    [C#]      MonoGame/Games/Mobile/Android             
MonoGame Content Pipeline Extension          mgpipeline   [C#]      MonoGame/Games/Extensions                 
MonoGame Cross-Platform Desktop Application  mgdesktopgl  [C#]      MonoGame/Games/Desktop/Windows/Linux/macOS
MonoGame Game Library                        mglib        [C#]      MonoGame/Games/Library                    
MonoGame iOS Application                     mgios        [C#]      MonoGame/Games/Mobile/iOS                 
MonoGame Shared Library Project              mgshared     [C#]      MonoGame/Games/Library                    
MonoGame Windows Desktop Application         mgwindowsdx  [C#]      MonoGame/Games/Desktop/Windows/Linux/macOS
</code></pre><p>Legt ein neues Verzeichnis an und wählt dann das passende Template aus:</p>
<pre tabindex="0"><code>&gt; mkdir csmoonhack
&gt; cd csmoonhack
&gt; dotnet new mgwindowsdx
</code></pre><p>Dann könnt ihr euer Projekt mit eurer Entwicklungsumgebung (IDE, Integrated Development Environment) öffnen.</p>
<h2 id="anpassen-des-erstellten-codes">Anpassen des erstellten Codes</h2>
<p>Die Vorlage für das Spiel ist ja nun fertig. Zuerst benennen wir die Datei <code>Game1.cs</code> in <code>LunarLanderGame.cs</code> um. Anschließend die Datei öffnen und dort die Zeile:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">Game1</span> : Game {
</span></span></code></pre></div><p>in</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">LunarLanderGame</span> : Game {
</span></span></code></pre></div><p>ändern.</p>
<p>In Program.cs müssen wir auch dafür sorgen, dass dort die neue Klasse verwendet wird. Dort wird die Zeile</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#00f">using</span> var game = <span style="color:#00f">new</span> csmoonhack.Game1();
</span></span></code></pre></div><p>zu</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#00f">using</span> var game = <span style="color:#00f">new</span> csmoonhack.LunarLanderGame();
</span></span></code></pre></div><h2 id="content-hinzufügen">Content hinzufügen</h2>
<p>Kopiere die im ersten Abschnitt genannten Dateien (<code>.png</code> und <code>.wav</code>) in das Unterverzeichnis <code>Content</code> deines Projekts. Dazu gehören:</p>
<ul>
<li><code>backdrop1.png</code></li>
<li><code>lunar_lander_sheet.png</code></li>
<li><code>thruster.wav</code></li>
<li><code>landed.wav</code></li>
<li><code>problem.wav</code></li>
</ul>
<p>Öffne anschließend die Datei <code>Content.mgcb</code>, die sich ebenfalls im <code>Content</code>-Ordner befindet. Dort kannst du die Assets zum Projekt hinzufügen und verwalten.</p>
<hr>
<blockquote>
<p><u><strong>Info:</strong></u><br>
Eine <code>.mgcb</code>-Datei ist eine Textdatei, die Informationen darüber enthält, welche Dateien vom Content-Pipeline-Tool verarbeitet werden sollen.<br>
Jede hinzugefügte Datei wird mit einem <code>#begin</code>-Eintrag eingeleitet, gefolgt von Optionen wie z. B. <code>Importer</code>, <code>Processor</code> und <code>Build</code>.<br>
Beispiel:</p>
<pre tabindex="0"><code>#begin backdrop1.png
/importer:TextureImporter
/processor:TextureProcessor
/build:backdrop1.png
</code></pre><p>Diese Datei kannst du entweder mit einem Editor oder bequem mit dem MGCB-Editor bearbeiten, der in Visual Studio als Erweiterung verfügbar ist.</p>
</blockquote>
<hr>
<p>Die Datei sollte dann in der Sektion Content wie unten aussehen. Den Rest lassen wir einfach, wie er ist.</p>
<pre tabindex="0"><code>#---------------------------------- Content ---------------------------------#
#begin backdrop1
/importer:TextureImporter
/processor:TextureProcessor
/build:backdrop1.png

#begin lunar_lander_sheet
/importer:TextureImporter
/processor:TextureProcessor
/build:lunar_lander_sheet.png

#begin thruster
/importer:WavImporter
/processor:SoundEffectProcessor
/build:thruster.wav

#begin problem
/importer:WavImporter
/processor:SoundEffectProcessor
/build:problem.wav

#begin landed
/importer:WavImporter
/processor:SoundEffectProcessor
/build:landed.wav
</code></pre><h2 id="variablen-und-vorbereiten-des-spielfelds">Variablen und vorbereiten des Spielfelds</h2>
<p>Ab hier werden wir die Datei <code>LunarLanderGame.cs</code> mit code füllen. Als Erstes brauchen wir einige Variablen, um den aktuellen Spielzustand zu halten.</p>
<ul>
<li>Texturen und Soundeffects</li>
<li>der aktuelle Sprite-Index (normal, kaputt und mit Triebwerk ein)</li>
<li>die aktuelle Geschwindigkeit</li>
<li>die Position über der Mondoberfläche</li>
<li>die Position als Pixel-Position im Bild</li>
<li>einen Indikator, ob das Spiel noch läuft oder schon vorbei ist.</li>
</ul>
<p>Der Anfang der Klasse <code>LunarLanderGame</code> sollte dann so aussehen:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">LunarLanderGame</span> : Game {
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#00f">const</span> <span style="color:#2b91af">int</span> GAME_UNIT_HEIGHT = 200;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">// wird vom Framework benötigt</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> GraphicsDeviceManager _graphics;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> SpriteBatch _spriteBatch;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">// Grafiken die von &#34;Content&#34; geladen werden</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> Texture2D _lunarLanderSpriteSheet;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> Texture2D _backgroundTexture;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> Rectangle[] _spriteFrames;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">// SoundEffects</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> SoundEffectInstance _thrusterSoundInstance;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> SoundEffectInstance _landedSoundInstance;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> SoundEffectInstance _problemSoundInstance;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">// Variablen für das den Spielzustand</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#2b91af">int</span> _currentSprite;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#2b91af">float</span> _speed;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#2b91af">float</span> _position;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#2b91af">int</span> _absoluteYPos;
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#2b91af">bool</span> _gameOver;
</span></span></code></pre></div><p>Ausserdem müssen wir im Konstruktor, den wir auch noch auf <code>LunarLanderGame</code> umbenennen sollten, noch das Spielfeld einstellen:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>    <span style="color:#00f">public</span> LunarLanderGame() {
</span></span><span style="display:flex;"><span>        _graphics = <span style="color:#00f">new</span> GraphicsDeviceManager(<span style="color:#00f">this</span>) {
</span></span><span style="display:flex;"><span>            PreferredBackBufferWidth = 1024,
</span></span><span style="display:flex;"><span>            PreferredBackBufferHeight = 720,
</span></span><span style="display:flex;"><span>            GraphicsProfile = GraphicsProfile.HiDef,
</span></span><span style="display:flex;"><span>            PreferMultiSampling = <span style="color:#00f">true</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        Content.RootDirectory = <span style="color:#a31515">&#34;Content&#34;</span>;
</span></span><span style="display:flex;"><span>        IsMouseVisible = <span style="color:#00f">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>In der <code>Initialize</code> Methode sollten die Zustände für den Spielanfang eingetragen werden:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>    <span style="color:#00f">protected</span> <span style="color:#00f">override</span> <span style="color:#00f">void</span> Initialize() {
</span></span><span style="display:flex;"><span>        <span style="color:#008000">// Initiale Werte für das Spiel</span>
</span></span><span style="display:flex;"><span>        _speed = 0;
</span></span><span style="display:flex;"><span>        _gameOver = <span style="color:#00f">false</span>;
</span></span><span style="display:flex;"><span>        _absoluteYPos = 0;
</span></span><span style="display:flex;"><span>        _currentSprite = 0;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#00f">base</span>.Initialize();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="laden-des-content">Laden des Content</h2>
<p>Die Inhalte, die in <code>Content.mgcb</code> eingefügt wurden können wir nun einfach laden. Das Spritesheet müssen wir allerdings noch zerlegen:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>    <span style="color:#00f">protected</span> <span style="color:#00f">override</span> <span style="color:#00f">void</span> LoadContent() {
</span></span><span style="display:flex;"><span>        _spriteBatch = <span style="color:#00f">new</span> SpriteBatch(GraphicsDevice);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _lunarLanderSpriteSheet = Content.Load&lt;Texture2D&gt;(<span style="color:#a31515">&#34;lunar_lander_sheet&#34;</span>);
</span></span><span style="display:flex;"><span>        _backgroundTexture = Content.Load&lt;Texture2D&gt;(<span style="color:#a31515">&#34;backdrop1&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000">// Lade Audio-Dateien</span>
</span></span><span style="display:flex;"><span>        SoundEffect thrustersSound = Content.Load&lt;SoundEffect&gt;(<span style="color:#a31515">&#34;thruster&#34;</span>);
</span></span><span style="display:flex;"><span>        SoundEffect landedSound = Content.Load&lt;SoundEffect&gt;(<span style="color:#a31515">&#34;landed&#34;</span>);
</span></span><span style="display:flex;"><span>        SoundEffect problemSound = Content.Load&lt;SoundEffect&gt;(<span style="color:#a31515">&#34;problem&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _thrusterSoundInstance = thrustersSound.CreateInstance();
</span></span><span style="display:flex;"><span>        _thrusterSoundInstance.IsLooped = <span style="color:#00f">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _landedSoundInstance = landedSound.CreateInstance();
</span></span><span style="display:flex;"><span>        _landedSoundInstance.IsLooped = <span style="color:#00f">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _problemSoundInstance = problemSound.CreateInstance();
</span></span><span style="display:flex;"><span>        _problemSoundInstance.IsLooped = <span style="color:#00f">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        SliceSpriteSheet();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#00f">void</span> SliceSpriteSheet() {
</span></span><span style="display:flex;"><span>        <span style="color:#2b91af">int</span> frameHeight = _lunarLanderSpriteSheet.Height;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _spriteFrames = <span style="color:#00f">new</span> Rectangle[3];
</span></span><span style="display:flex;"><span>        <span style="color:#008000">// Zerlege das SpriteSheet in einzelne Sprites</span>
</span></span><span style="display:flex;"><span>        <span style="color:#2b91af">int</span> pos = 30;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _spriteFrames[0] = <span style="color:#00f">new</span> Rectangle(pos, 0, 525, frameHeight);
</span></span><span style="display:flex;"><span>        pos += 525 + 30;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _spriteFrames[1] = <span style="color:#00f">new</span> Rectangle(pos, 0, 931, frameHeight);
</span></span><span style="display:flex;"><span>        pos += 931 + 30;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _spriteFrames[2] = <span style="color:#00f">new</span> Rectangle(pos, 0, 526, frameHeight);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="die-hauptschleife-des-spiels-update-und-draw">Die Hauptschleife des Spiels (Update und Draw)</h2>
<p>Unsere <code>Update</code>-Methode sieht ungefähr so aus:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>    <span style="color:#00f">protected</span> <span style="color:#00f">override</span> <span style="color:#00f">void</span> Update(GameTime gameTime) {
</span></span><span style="display:flex;"><span>        <span style="color:#00f">if</span> (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed ||
</span></span><span style="display:flex;"><span>            Keyboard.GetState().IsKeyDown(Keys.Escape)) {
</span></span><span style="display:flex;"><span>            Exit();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#00f">if</span> (!_gameOver) {
</span></span><span style="display:flex;"><span>            TouchCollection touchCollection = TouchPanel.GetState();
</span></span><span style="display:flex;"><span>            <span style="color:#2b91af">bool</span> isThrusting =
</span></span><span style="display:flex;"><span>                GamePad.GetState(PlayerIndex.One).Buttons.BigButton == ButtonState.Pressed ||
</span></span><span style="display:flex;"><span>                (touchCollection.Count &gt; 0 &amp;&amp; touchCollection[0].State == TouchLocationState.Pressed) ||
</span></span><span style="display:flex;"><span>                Keyboard.GetState().IsKeyDown(Keys.Space);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#00f">if</span> (isThrusting) {
</span></span><span style="display:flex;"><span>                <span style="color:#00f">if</span> (_thrusterSoundInstance.State != SoundState.Playing) {
</span></span><span style="display:flex;"><span>                    _thrusterSoundInstance.Play();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            } <span style="color:#00f">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#00f">if</span> (_thrusterSoundInstance.State == SoundState.Playing) {
</span></span><span style="display:flex;"><span>                    _thrusterSoundInstance.Stop();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            CalculateSpritePosition(gameTime, isThrusting);
</span></span><span style="display:flex;"><span>            CheckLanding();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#008000">// Aktuelle Position des Lunar-Lander berechnen</span>
</span></span><span style="display:flex;"><span>            _absoluteYPos = (<span style="color:#2b91af">int</span>)(_position * (_graphics.PreferredBackBufferHeight / GAME_UNIT_HEIGHT));
</span></span><span style="display:flex;"><span>        } <span style="color:#00f">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#00f">if</span> (_thrusterSoundInstance.State == SoundState.Playing) {
</span></span><span style="display:flex;"><span>                _thrusterSoundInstance.Stop();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Die Hilfsmethoden <code>CalculateSpritePosition</code> und <code>CheckLanding</code> haben wir ausgelagert und du findest sie hier:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#00f">void</span> CheckLanding() {
</span></span><span style="display:flex;"><span>        <span style="color:#00f">if</span> (_position &gt; GAME_UNIT_HEIGHT * 0.95f) {
</span></span><span style="display:flex;"><span>            <span style="color:#008000">// ende nach 95% des spielfelds</span>
</span></span><span style="display:flex;"><span>            _gameOver = <span style="color:#00f">true</span>;
</span></span><span style="display:flex;"><span>            _position = GAME_UNIT_HEIGHT * 0.95f;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#00f">if</span> (_speed &gt; 10) { <span style="color:#008000">// Das war wohl zu schnell</span>
</span></span><span style="display:flex;"><span>                _currentSprite = 1;
</span></span><span style="display:flex;"><span>                _problemSoundInstance.Play();
</span></span><span style="display:flex;"><span>            } <span style="color:#00f">else</span> { <span style="color:#008000">// Super - wir sind gelanded</span>
</span></span><span style="display:flex;"><span>                _currentSprite = 0;
</span></span><span style="display:flex;"><span>                _landedSoundInstance.Play();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            _speed = 0;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#00f">private</span> <span style="color:#00f">void</span> CalculateSpritePosition(GameTime gameTime, <span style="color:#2b91af">bool</span> isThrusting) {
</span></span><span style="display:flex;"><span>        <span style="color:#00f">if</span> (isThrusting) {
</span></span><span style="display:flex;"><span>            _currentSprite = 2;
</span></span><span style="display:flex;"><span>            _speed -= gameTime.ElapsedGameTime.Milliseconds * 0.05f;
</span></span><span style="display:flex;"><span>        } <span style="color:#00f">else</span> {
</span></span><span style="display:flex;"><span>            _currentSprite = 0;
</span></span><span style="display:flex;"><span>            _speed += gameTime.ElapsedGameTime.Milliseconds * 0.01f;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _position += _speed * gameTime.ElapsedGameTime.Milliseconds * 0.001f;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Die <code>Draw</code>-Methode kümmert sich um die Skalierung der Figuren und die Darstellung des Spielfelds</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>    <span style="color:#00f">protected</span> <span style="color:#00f">override</span> <span style="color:#00f">void</span> Draw(GameTime gameTime) {
</span></span><span style="display:flex;"><span>        GraphicsDevice.Clear(Color.CornflowerBlue);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000">// Hintergrund zeichnen</span>
</span></span><span style="display:flex;"><span>        _spriteBatch.Begin();
</span></span><span style="display:flex;"><span>        _spriteBatch.Draw(_backgroundTexture, GraphicsDevice.Viewport.Bounds, Color.White);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000">// skalieren des Landers</span>
</span></span><span style="display:flex;"><span>        <span style="color:#2b91af">float</span> scale = (_graphics.PreferredBackBufferHeight / 5f) / _spriteFrames[_currentSprite].Height;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#2b91af">int</span> targetWidth = (<span style="color:#2b91af">int</span>)(_spriteFrames[_currentSprite].Width * scale);
</span></span><span style="display:flex;"><span>        <span style="color:#2b91af">int</span> targetHeight = (<span style="color:#2b91af">int</span>)(_spriteFrames[_currentSprite].Height * scale);
</span></span><span style="display:flex;"><span>        Rectangle destinationRectangle = <span style="color:#00f">new</span> Rectangle(
</span></span><span style="display:flex;"><span>            (_graphics.PreferredBackBufferWidth - targetWidth) / 2,
</span></span><span style="display:flex;"><span>            _absoluteYPos,
</span></span><span style="display:flex;"><span>            targetWidth,
</span></span><span style="display:flex;"><span>            targetHeight
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000">// und zeichnen des Landers an seiner aktuellen Position</span>
</span></span><span style="display:flex;"><span>        _spriteBatch.Draw(_lunarLanderSpriteSheet, destinationRectangle, _spriteFrames[_currentSprite], Color.White);
</span></span><span style="display:flex;"><span>        _spriteBatch.End();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#00f">base</span>.Draw(gameTime);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Damit ist das Spiel nun fertig. Viel Spaß damit und viel Erfolg beim Landen auf dem Mond.</p>
<h2 id="erweiterungen">Erweiterungen</h2>
<p>Wenn du noch eine Herausforderung suchst, bau doch bitte einen Treibstoffzähler ein, der während des Triebwerkseinsatzes Treibstoff verbraucht. Wie auch in der echten Mondlandefähre ist Treibstoff immer knapp und sollte mit Bedacht eingesetzt werden.</p>
 </div>
        </div>
    </div>
</section>  
    <footer>
        <div class="container">
            <div class="row">
                <div class="col">
                    <div>
                        <div>
                            <img src="/img/logo-coding-club-linz-white.svg">
                        </div>
                        <div>Coding Club Linz<br />Birkenweg 16, 4060 Leonding <br />
                            <a href="mailto:info@linz.coderdojo.net">info@linz.coderdojo.net</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer> <!-- Js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/locale/de-at.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <script src="https://linz.coderdojo.net/js/wow.min.js"></script>
    <script src="https://linz.coderdojo.net/js/main.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6LfXNMcZAAAAALYnf3GpUqw5uotVMyjhLNU438i9"></script>
</body>

</html>
